(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef53b1da"],{"0c9b":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"mine-confirm"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"mine-confirm-wrapper"},[n("div",{staticClass:"mine-confirm"},[e.title?n("div",{staticClass:"mine-confirm-title"},[e._v(e._s(e.title))]):e._e(),n("div",{staticClass:"mine-confirm-msg"},[e._v(e._s(e.msg))]),n("div",{staticClass:"mine-confirm-btns"},[n("button",{staticClass:"mine-confirm-btn mine-confirm-cancel",on:{click:e.cancel}},[e._v(e._s(e.cancelBtnText))]),n("button",{staticClass:"mine-confirm-btn mine-confirm-ok",on:{click:e.confirm}},[e._v(e._s(e.confirmBtnText))])])])])])},o=[],i={name:"MeConfirm",props:{title:{type:String,default:""},msg:{type:String,default:"确定执行此操作吗？"},cancelBtnText:{type:String,default:"取消"},confirmBtnText:{type:String,default:"确定"}},data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1},cancel:function(){this.hide(),this.$emit("cancel")},confirm:function(){this.hide(),this.$emit("confirm")}}},s=i,a=(n("dc85"),n("2877")),c=Object(a["a"])(s,r,o,!1,null,"14121dcc",null);t["a"]=c.exports},1418:function(e,t,n){},2475:function(e,t,n){"use strict";var r=n("a7fe"),o=n.n(r);o.a},3774:function(e,t,n){var r;function o(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}function i(e){function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!==typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"===typeof o){var i=s[c];n=o.call(e,i),s.splice(c,1),c--}return n})),t.formatArgs.call(e,s);var u=n.log||t.log||console.log.bind(console);u.apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=o(e),"function"===typeof t.init&&t.init(n),n}function s(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"===typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function c(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i.debug=i["default"]=i,t.coerce=u,t.disable=a,t.enable=s,t.enabled=c,t.humanize=n("d826"),t.names=[],t.skips=[],t.formatters={}},"54ed":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mine-search-box-wrapper"},[n("i",{staticClass:"iconfont icon-search"}),e.fake?n("div",{staticClass:"mine-search-box"},[e._v(e._s(e.placeholder))]):e._e(),e.fake?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"mine-search-box",attrs:{type:"text",title:"搜索框",placeholder:e.placeholder},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}}),n("i",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],staticClass:"iconfont icon-close",on:{click:e.reset}})])},o=[],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=null;return function(){for(var r=this,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];n&&clearTimeout(n),n=setTimeout((function(){e.apply(r,i)}),t)}},s={name:"MeSearchBox",props:{placeholder:{type:String,default:"请输入搜索内容"},fake:{type:Boolean,default:!1}},data:function(){return{query:""}},watch:{query:i((function(){this.$emit("query",this.query)}))},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},clear:function(){this.query=""},reset:function(){this.clear(),this.focus()}}},a=s,c=(n("2475"),n("2877")),u=Object(c["a"])(a,r,o,!1,null,"78902986",null);t["a"]=u.exports},"582e":function(e,t,n){"use strict";n("c975"),n("a15b"),n("d81d"),n("d3b7");var r=n("f187"),o=n.n(r),i=function(e){var t=[];for(var n in e)t.push([n,e[n]]);return t.map((function(e){return e.join("=")})).join("&")};t["a"]=function(e,t,n){return e+=(e.indexOf("?")<0?"?":"&")+i(t),new Promise((function(t,r){o()(e,n,(function(e,n){e?r(n):t(n)}))}))}},"5eb5":function(e,t,n){"use strict";var r=n("f7c0"),o=n.n(r);o.a},"68fe":function(e,t,n){"use strict";var r=window.localStorage;function o(e){return JSON.stringify(e)}function i(e){if("string"===typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}}t["a"]={set:function(e,t){void 0!==t&&r.setItem(e,o(t))},get:function(e,t){var n=i(r.getItem(e));return void 0===n?t:n},remove:function(e){r.removeItem(e)},clear:function(){r.clear()}}},"808f":function(e,t,n){},"814d":function(e,t,n){"use strict";var r=n("808f"),o=n.n(r);o.a},a15b:function(e,t,n){"use strict";var r=n("23e7"),o=n("44ad"),i=n("fc6a"),s=n("b301"),a=[].join,c=o!=Object,u=s("join",",");r({target:"Array",proto:!0,forced:c||u},{join:function(e){return a.call(i(this),void 0===e?",":e)}})},a7fe:function(e,t,n){},b268:function(e,t,n){"use strict";var r=n("e1ae"),o=n.n(r);o.a},c0e9:function(e,t,n){},ce0f:function(e,t,n){(function(r){function o(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,r)}}function s(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function c(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=Object({NODE_ENV:"production",BASE_URL:"/ecmall-vue/"}).DEBUG),e}function u(){try{return window.localStorage}catch(e){}}t=e.exports=n("3774"),t.log=s,t.formatArgs=i,t.save=a,t.load=c,t.useColors=o,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(c())}).call(this,n("4362"))},d042:function(e,t,n){"use strict";var r=n("1418"),o=n.n(r);o.a},d81d:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").map,i=n("1dde");r({target:"Array",proto:!0,forced:!i("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},d826:function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,s=365.25*i;function a(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var a=parseFloat(t[1]),c=(t[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function c(e){return e>=i?Math.round(e/i)+"d":e>=o?Math.round(e/o)+"h":e>=r?Math.round(e/r)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}function u(e){return l(e,i,"day")||l(e,o,"hour")||l(e,r,"minute")||l(e,n,"second")||e+" ms"}function l(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return a(e);if("number"===n&&!1===isNaN(e))return t.long?u(e):c(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},da71:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s}));var r=0,o=1e4,i=20,s={param:"callback",timeout:o}},dc85:function(e,t,n){"use strict";var r=n("c0e9"),o=n.n(r);o.a},e1ae:function(e,t,n){},efe3:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"search"}},[n("div",{staticClass:"search"},[n("header",{staticClass:"g-header-container"},[n("search-header",{on:{query:e.getQuery}})],1),n("div",{staticClass:"g-content-container"},[n("me-scroll",{ref:"scroll"},[n("search-hot",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],on:{loaded:e.updateScroll}}),n("search-history",{directives:[{name:"show",rawName:"v-show",value:!e.query,expression:"!query"}],ref:"history",on:{"show-confirm":e.showConfirm}}),n("search-result",{directives:[{name:"show",rawName:"v-show",value:e.query,expression:"query"}],attrs:{query:e.query},on:{"remove-item":e.updateScroll}})],1)],1),n("me-confirm",{ref:"confirm",attrs:{msg:"确定要清空吗？"},on:{confirm:e.clearAllSearchHistories}})],1)])},o=[],i=n("204f"),s=n("0c9b"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("me-navbar",{staticClass:"header",scopedSlots:e._u([{key:"left",fn:function(){return[n("i",{staticClass:"iconfont icon-back",on:{click:e.goBack}})]},proxy:!0},{key:"center",fn:function(){return[n("me-search-box",{attrs:{placeholder:"开学季有礼，好货5折起"},on:{query:e.query}})]},proxy:!0}])})},c=[],u=n("9b10"),l=n("54ed"),f={name:"SearchHeader",components:{MeNavbar:u["a"],MeSearchBox:l["a"]},methods:{query:function(e){this.$emit("query",e)},goBack:function(){this.$router.back()}}},d=f,h=(n("b268"),n("2877")),m=Object(h["a"])(d,a,c,!1,null,"dbe57006",null),p=m.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hot"},[n("h4",{staticClass:"hot-title"},[e._v("热门搜索")]),e.hots.length?n("ul",{staticClass:"hot-list"},e._l(e.hots,(function(t,r){return n("li",{key:r,staticClass:"hot-item",on:{click:function(n){return e.$_selectItem(t.hotWord)}}},[e._v(e._s(t.hotWord))])})),0):n("div",{staticClass:"loading-container"},[n("me-loading")],1)])},g=[],y=(n("d3b7"),n("bdfe")),w=n("bc3a"),b=n.n(w),_=n("582e"),C=n("da71"),x=function(){return b.a.get("http://www.imooc.com/api/search/hot",{timeout:C["c"]}).then((function(e){if(e=e.data.hotKeyWord,e&&e.owner)return e.owner;throw new Error("没有成功获取到数据！")})).catch((function(e){if(e)return e})).then((function(e){return new Promise((function(t){setTimeout((function(){t(e)}),1e3)}))}))},k=function(e){var t="https://suggest.taobao.com/sug",n={q:e,code:"utf-8",area:"c2c",nick:"",sid:null};return Object(_["a"])(t,n,C["d"]).then((function(e){if(e.result)return e.result;throw new Error("没有成功获取到数据！")})).catch((function(e){if(e)return e})).then((function(e){return new Promise((function(t){setTimeout((function(){t(e)}),1e3)}))}))},S=(n("4de4"),n("68fe")),q="ecmall-search",$="key",E="".concat(q,"-history-keyword-").concat($),N={methods:{$_selectItem:function(e){var t=S["a"].get(E,[]);0!==t.length&&(t=t.filter((function(t){return t!==e}))),t.unshift(e),S["a"].set(E,t),location.href="https://s.m.taobao.com/h5?event_submit_do_new_search_auction=1&_input_charset=utf-8&topSearch=1&atype=b&searchfrom=1&action=home%3Aredirect_app_action&from=1&sst=1&n=20&buying=buyitnow&q=".concat(e)}}},j={name:"SearchHot",components:{MeLoading:y["a"]},mixins:[N],data:function(){return{hots:[]}},created:function(){var e=this;this.getHotKeyWord().then((function(){e.$emit("loaded")}))},methods:{getHotKeyWord:function(){var e=this;return x().then((function(t){return new Promise((function(n){t&&(e.hots=t,n())}))}))}}},O=j,A=(n("d042"),Object(h["a"])(O,v,g,!1,null,"ef00694c",null)),M=A.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.histories.length?n("div",{staticClass:"history"},[n("h4",{staticClass:"history-title"},[e._v("历史搜索")]),n("transition-group",{staticClass:"g-list",attrs:{name:"list",tag:"ul"}},e._l(e.histories,(function(t){return n("li",{key:t,staticClass:"g-list-item",on:{click:function(n){return e.$_selectItem(t)}}},[n("span",{staticClass:"g-list-text"},[e._v(e._s(t))]),n("i",{staticClass:"iconfont icon-delete",on:{click:function(n){return n.stopPropagation(),e.removeItem(t)}}})])})),0),n("a",{staticClass:"history-btn",attrs:{href:"javascript:;"},on:{click:e.showConfirm}},[n("i",{staticClass:"iconfont icon-clear"}),e._v("清空历史搜索 ")])],1):e._e()},T=[],I={name:"SearchHistory",mixins:[N],data:function(){return{histories:[]}},created:function(){this.getKeyword()},methods:{update:function(){this.getKeyword()},getKeyword:function(){this.histories=S["a"].get(E,[])},removeItem:function(e){var t=this;this.histories=this.histories.filter((function(t){return t!==e})),S["a"].set(E,this.histories),setTimeout((function(){t.$emit("remove-item",e)}),100)},showConfirm:function(){this.$emit("show-confirm")},clear:function(){S["a"].remove(E)}}},H=I,R=(n("5eb5"),Object(h["a"])(H,B,T,!1,null,"81e7a9b2",null)),J=R.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"result"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading-container"},[n("me-loading")],1),n("ul",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&e.results.length,expression:"!loading && results.length"}],staticClass:"g-list"},e._l(e.results,(function(t,r){return n("li",{key:r,staticClass:"g-list-item",on:{click:function(n){return e.$_selectItem(t[0])}}},[n("span",{staticClass:"g-list-text"},[e._v(e._s(t[0]))])])})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading&&!e.results.length,expression:"!loading && !results.length"}],staticClass:"no-result"},[e._v("没有结果")])])},K=[],L={name:"SearchResult",components:{MeLoading:y["a"]},props:{query:{type:String,default:""}},data:function(){return{results:[],loading:!1}},mixins:[N],watch:{query:function(e){this.getResults(e)}},methods:{getResults:function(e){var t=this;e&&(this.loading=!0,k(e).then((function(e){e&&(t.results=e,t.loading=!1)})))}}},W=L,z=Object(h["a"])(W,P,K,!1,null,"71dd88bf",null),U=z.exports,D={name:"Search",components:{MeScroll:i["a"],MeConfirm:s["a"],SearchHeader:p,SearchHot:M,SearchHistory:J,SearchResult:U},data:function(){return{query:""}},methods:{getQuery:function(e){this.query=e},showConfirm:function(){this.$refs.confirm.show()},clearAllSearchHistories:function(){this.$refs.history.clear(),this.$refs.history.update()},updateScroll:function(){this.$refs.scroll.update()}}},F=D,Q=(n("814d"),Object(h["a"])(F,r,o,!1,null,"0a9fdc42",null));t["default"]=Q.exports},f187:function(e,t,n){var r=n("ce0f")("jsonp");e.exports=s;var o=0;function i(){}function s(e,t,n){"function"==typeof t&&(n=t,t={}),t||(t={});var s,a,c=t.prefix||"__jp",u=t.name||c+o++,l=t.param||"callback",f=null!=t.timeout?t.timeout:6e4,d=encodeURIComponent,h=document.getElementsByTagName("script")[0]||document.head;function m(){s.parentNode&&s.parentNode.removeChild(s),window[u]=i,a&&clearTimeout(a)}function p(){window[u]&&m()}return f&&(a=setTimeout((function(){m(),n&&n(new Error("Timeout"))}),f)),window[u]=function(e){r("jsonp got",e),m(),n&&n(null,e)},e+=(~e.indexOf("?")?"&":"?")+l+"="+d(u),e=e.replace("?&","?"),r('jsonp req "%s"',e),s=document.createElement("script"),s.src=e,h.parentNode.insertBefore(s,h),p}},f7c0:function(e,t,n){}}]);
//# sourceMappingURL=chunk-ef53b1da.85820f9a.js.map